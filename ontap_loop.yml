---
  - name: var loop
    hosts: localhost
    gather_facts: no

    vars:
      host_info:
        - { host: station1, ip: 192.168.2.10, netmask: 255.255.255.0 }
        - { host: station2, ip: 192.168.2.20, netmask: 255.255.255.0 }
        - { host: station3, ip: 192.168.2.30, netmask: 255.255.255.0 }

    tasks:
    - set_fact:
        ip: "{{ ip |default([]) +  [ { 'ip': item.ip,  'netmask': item.netmask, 'idx': idx } ]  }}"
      loop: "{{ host_info }}"
      loop_control:
        index_var: idx

    - debug: var=ip
